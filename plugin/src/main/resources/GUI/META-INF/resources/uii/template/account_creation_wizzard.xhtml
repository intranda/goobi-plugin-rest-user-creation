<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:zlb="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <h2 class="page__heading">
            <h:outputText
                rendered="#{externalLoginBean.wizzardMode=='page1' or externalLoginBean.wizzardMode=='confirm'}"
                value="#{msgs.login_new_account}" />
            <h:outputText
                rendered="#{externalLoginBean.wizzardMode=='page2'}"
                value="#{msgs.login_new_institution}" />
            <h:outputText
                rendered="#{externalLoginBean.wizzardMode=='page3'}"
                value="#{msgs.login_new_contact}" />
            <h:outputText
                rendered="#{externalLoginBean.wizzardMode=='page4'}"
                value="#{msgs.login_new_additionalData}" />
            <h:outputText
                rendered="#{externalLoginBean.wizzardMode=='page5'}"
                value="#{msgs.login_new_activation}" />
            <button
                type="button"
                class="btn page__help"
                aria-label="#{msgs.plugin_rest_usercreation_ariaLabel_pageHelp}"
                data-bs-toggle="modal"
                data-bs-title="help title"
                data-bs-target="#pageHelpModal">
                <ui:include src="/uii/includes/icon-help.xhtml" />
            </button>
        </h2>


        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page1'}">

            <section class="common-region">
                <!-- account name -->
                <div class="form #{externalLoginBean.institutionShortNameInUse == true || externalLoginBean.institutionShortNameInvalid == true ? 'validate--danger' : ''}">

                    <zlb:label
                        labelFor="accountName"
                        labelText="#{msgs.login_new_account_accountName}"
                        labelRequired="true" />

                    <x:inputText
                        id="accountName"
                        pt:aria-label="#{msgs.login_new_account_accountName}"
                        styleClass="form-control"
                        value="#{externalLoginBean.accountName}">
                        <f:ajax
                            render="@this"
                            execute="@this" />
                        <f:passThroughAttribute
                            name="placeholder"
                            value="#{msgs.login_new_account_accountName}" />
                    </x:inputText>
                    <!-- ICONS -->
                    <ui:include src="/uii/includes/form_icons.xhtml">
                        <ui:param
                            name="helpTitle"
                            value="#{msgs.login_new_account_accountName}" />
                        <ui:param
                            name="helpBody"
                            value="#{msgs.plugin_rest_usercreation_helpText_userName}" />
                    </ui:include>
                    <h:panelGroup
                        layout="block"
                        rendered="#{!externalLoginBean.accountNameValid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{externalLoginBean.accountNameErrorMessage}" />
                    </h:panelGroup>
                </div>

                <!-- firstname -->
                <div class="form column-start">
                    <zlb:label
                        labelFor="firstname"
                        labelText="#{msgs.firstname}"
                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                        labelRequired="true" />

                    <zlb:input
                        inputId="firstname"
                        inputAriaLabel="#{msgs.firstname}"
                        inputValue="#{externalLoginBean.firstname}"
                        inputRequired="false"
                        inputPlaceholder="#{msgs.firstname}"
                        helpTitle="#{msgs.firstname}"
                        helpText="#{msgs.plugin_rest_usercreation_helpText_firstname}" />

                    <h:panelGroup
                        layout="block"
                        rendered="#{!externalLoginBean.firstNameValid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{externalLoginBean.firstNameErrorMessage}" />
                    </h:panelGroup>

                </div>

                <!-- lastname -->
                <div class="form">
                    <zlb:label
                        labelFor="lastname"
                        labelText="#{msgs.lastname}"
                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                        labelRequired="true" />

                    <zlb:input
                        inputId="lastname"
                        inputAriaLabel="#{msgs.lastname}"
                        inputValue="#{externalLoginBean.lastname}"
                        inputRequired="false"
                        inputPlaceholder="#{msgs.lastname}"
                        showHelpBtn="true"
                        helpTitle="#{msgs.lastname}"
                        helpText="#{msgs.plugin_rest_usercreation_helpText_lastname}" />
                    <h:panelGroup
                        layout="block"
                        rendered="#{!externalLoginBean.lastNameValid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{externalLoginBean.lastNameErrorMessage}" />
                    </h:panelGroup>
                </div>

                <!-- password -->
                <div class="form">

                    <zlb:label
                        labelFor="password"
                        labelText="#{msgs.login_new_account_password}"
                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                        labelRequired="true" />

                    <x:inputSecret
                        id="password"
                        pt:aria-label="#{msgs.login_new_account_password}"
                        forceId="true"
                        styleClass="form-control"
                        value="#{externalLoginBean.password}"
                        required="false">
                        <f:passThroughAttribute
                            name="placeholder"
                            value="" />
                    </x:inputSecret>

                    <!-- Icons -->
                    <ui:include src="/uii/includes/form_icons.xhtml">
                        <ui:param
                            name="helpTitle"
                            value="#{msgs.login_new_account_password}" />
                        <ui:param
                            name="helpBody"
                            value="#{msgs.plugin_rest_usercreation_helpText_password}" />
                    </ui:include>

                    <h:panelGroup
                        layout="block"
                        rendered="#{!externalLoginBean.passwordValid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{externalLoginBean.passwordErrorMessage}" />
                    </h:panelGroup>
                </div>

                <!-- confirm password -->
                <div class="form">

                    <zlb:label
                        labelFor="password2"
                        labelText="#{msgs.login_new_account_password2}"
                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                        labelRequired="true" />

                    <x:inputSecret
                        id="password2"
                        pt:aria-label="#{msgs.login_new_account_password2}"
                        forceId="true"
                        styleClass="form-control"
                        value="#{externalLoginBean.confirmPassword}"
                        required="false">
                        <f:passThroughAttribute
                            name="placeholder"
                            value="" />
                    </x:inputSecret>

                    <!-- Icons -->
                    <ui:include src="/uii/includes/form_icons.xhtml">
                        <ui:param
                            name="helpTitle"
                            value="#{msgs.login_new_account_password2}" />
                        <ui:param
                            name="helpBody"
                            value="#{msgs.plugin_rest_usercreation_helpText_password2}" />
                    </ui:include>

                </div>


                <!-- email address -->
                <div class="form">

                    <zlb:label
                        labelFor="emailAddress"
                        labelText="#{msgs.login_new_account_emailAddress}"
                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                        labelRequired="true" />

                    <zlb:input
                        inputId="emailAddress"
                        inputAriaLabel="#{msgs.login_new_account_emailAddress}"
                        inputForceId="true"
                        inputValue="#{externalLoginBean.emailAddress}"
                        inputRequired="false"
                        inputPlaceholder="#{msgs.login_new_account_emailAddress}"
                        helpTitle="#{msgs.login_new_account_emailAddress}"
                        helpText="#{msgs.plugin_rest_usercreation_helpText_email}" />

                    <h:panelGroup
                        layout="block"
                        rendered="#{!externalLoginBean.emailValid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{externalLoginBean.emailErrorMessage}" />
                    </h:panelGroup>
                </div>




                <div class="form form-check confirm-privacy">

                    <div class="form-check-wrapper">
                        <h:selectBooleanCheckbox
                            id="privacyStatement"
                            pt:aria-label="#{msgs.login_new_account_confirmPrivacyStatement}"
                            forceId="true"
                            styleClass="form-check-input"
                            value="#{externalLoginBean.privacyTextAccepted}"
                            required="false">
                        </h:selectBooleanCheckbox>

                        <label
                            for="privacyStatement"
                            class="zlb-label">
                            <h:outputText
                                escape="false"
                                value="#{msgs.login_new_account_confirmPrivacyStatement}" />

                            <span
                                class="input-required"
                                jsf:rendered="true">
                                <i class="fa fa-asterisk" />
                            </span>

                        </label>

                        <h:panelGroup
                            layout="block"
                            rendered="#{!externalLoginBean.privacyValid}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{externalLoginBean.privacyErrorMessage}" />
                        </h:panelGroup>
                    </div>
                    <!-- end form-check-wrapper -->


                    <!-- ICONS -->
                    <ui:include src="/uii/includes/form_icons.xhtml">
                        <ui:param
                            name="helpTitle"
                            value="#{msgs.plugin_rest_usercreation_helpTitle_privacy}" />
                        <ui:param
                            name="helpBody"
                            value="#{msgs.plugin_rest_usercreation_helpText_privacy}" />
                    </ui:include>

                </div>
            </section>
            <!-- end common-region -->

            <div class="info-required">
                <h:outputText
                    escape="false"
                    value="#{msgs.plugin_rest_usercreation_requiredFields}" />
            </div>

            <div class="form-actions form-actions--progress">
                <!-- cancel button -->
                <button
                    jsf:id="back"
                    class="btn btn-blank me-4"
                    jsf:immediate="true">
                    <f:setPropertyActionListener
                        value=""
                        target="#{externalLoginBean.uiStatus}" />
                    <h:outputText value="#{msgs.abbrechen}" />
                </button>

                <ui:include src="/uii/includes/zlb-progress.xhtml">
                    <ui:param
                        name="data"
                        value="#{externalLoginBean}" />
                </ui:include>

                <!-- create button -->
                <button
                    jsf:action="#{externalLoginBean.createAccount}"
                    jsf:id="create"
                    class="btn btn-primary-400 ms-4">
                    <h:outputText value="#{msgs.login_new_account_createAccount}" />
                </button>
            </div>


            <div
                class="modal fade"
                id="privacyModal"
                aria-labelledby="#{msgs.displayMode_privacyPolicy}"
                aria-hidden="true"
                tabindex="-1">
                <div class="modal-dialog modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">
                                <h:outputText value="#{msgs.displayMode_privacyPolicy}" />
                            </h5>
                            <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="#{msgs.close}"></button>
                        </div>
                        <div class="modal-body">
                            <h:outputText
                                value="#{externalLoginBean.privacyStatement}"
                                escape="false" />

                        </div>
                        <div class="modal-footer">
                            <button
                                type="button"
                                class="btn btn-secondary"
                                data-bs-dismiss="modal">
                                <h:outputText value="#{msgs.close}" />
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </ui:fragment>


        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='confirm'}">

            <section class="common-region">
                <h:outputText
                    escape="false"
                    value="#{msgs.login_new_account_confirmEmail}" />
            </section>
        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page2'}">

            <section class="common-region">
                <div class="form #{externalLoginBean.institutionShortNameInUse == true || externalLoginBean.institutionShortNameInvalid == true ? 'validate--danger' : ''}">

                    <zlb:label
                        labelFor="institutionShortName"
                        labelText="#{msgs.login_new_account_institutionShortName}"
                        labelRequired="true" />

                    <zlb:input
                        inputId="institutionShortName"
                        inputAriaLabel="#{msgs.login_new_account_institutionShortName}"
                        inputForceId="true"
                        inputValue="#{externalLoginBean.institutionShortName}"
                        inputRequired="false"
                        inputPlaceholder=""
                        inputDuplicate="false"
                        showHelpBtn="true"
                        helpTitle="#{msgs.login_new_account_institutionShortName}"
                        helpText="#{msgs.plugin_rest_usercreation_helpText_institutionShortName}" />
                    <h:panelGroup
                        layout="block"
                        rendered="#{externalLoginBean.institutionShortNameInvalid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{msgs.login_new_account_institutionShortNameInvalid}" />
                    </h:panelGroup>
                    <h:panelGroup
                        layout="block"
                        rendered="#{externalLoginBean.institutionShortNameInUse}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{msgs.login_new_account_institutionShortNameInUse}" />
                    </h:panelGroup>
                </div>

                <div class="form #{externalLoginBean.institutionNameInvalid ? 'validate--danger' : ''}">
                    <zlb:label
                        labelFor="institutionName"
                        labelText="#{msgs.login_new_account_institutionName}"
                        labelRequired="true" />

                    <zlb:input
                        inputId="institutionName"
                        inputAriaLabel="#{msgs.login_new_account_institutionName}"
                        inputForceId="true"
                        inputValue="#{externalLoginBean.institutionName}"
                        inputRequired="false"
                        inputPlaceholder=""
                        inputDuplicate="false"
                        showHelpBtn="true"
                        helpTitle="#{msgs.login_new_account_institutionName}"
                        helpText="#{msgs.plugin_rest_usercreation_helpText_institutionName}" />
                    <h:panelGroup
                        layout="block"
                        rendered="#{externalLoginBean.institutionNameInvalid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{msgs.login_new_account_institutionNameInvalid}" />
                    </h:panelGroup>
                </div>

                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page2']}">

                    <div class="form #{field.validationError ? 'validate--danger' : ''}">

                        <zlb:label
                            labelFor="input"
                            labelText="#{field.label}"
                            labelRequired="#{field.required}" />


                        <x:inputText
                            id="input"
                            rendered="#{field.fieldType=='input'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputText>

                        <x:inputTextarea
                            id="textarea"
                            rendered="#{field.fieldType=='textarea'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputTextarea>
                        <h:selectOneMenu
                            id="dropdown"
                            rendered="#{field.fieldType=='dropdown'}"
                            styleClass="form-control"
                            value="#{field.value}"
                            pt:aria-label="#{field.label}">
                            <f:selectItem
                                itemValue="null"
                                itemLabel="#{msgs.bitteAuswaehlen}" />
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox
                            rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.booleanValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                        </h:selectBooleanCheckbox>
                        <h:selectOneRadio
                            id="radio"
                            rendered="#{field.fieldType=='combo' and field.booleanValue}"
                            styleClass="form-control"
                            value="#{field.subValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneRadio>

                        <!-- ICONS -->
                        <ui:include src="/uii/includes/form_icons.xhtml">
                            <ui:param
                                name="helpTitle"
                                value="#{field.label}" />
                            <ui:param
                                name="helpBody"
                                value="#{field.helpMessage}" />
                        </ui:include>

                        <h:panelGroup
                            layout="block"
                            rendered="#{field.validationError}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{field.validationErrorMessage}" />
                        </h:panelGroup>
                        <h:outputText
                            styleClass="help-block font-light"
                            rendered="#{NavigationForm.showHelp}"
                            value="#{field.helpMessage}" />

                    </div>
                </ui:repeat>
            </section>
        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page3'}">

            <div class="form">
                <div class="form-check-wrapper">
                    <h:selectBooleanCheckbox
                        id="contactPersonCheckbox"
                        pt:aria-label="#{msgs.login_new_account_userIsContactPerson}"
                        forceId="true"
                        styleClass="form-check-input"
                        value="#{externalLoginBean.userIsContactPerson}"
                        required="false">
                        <f:ajax
                            execute="@this"
                            render="@form" />
                    </h:selectBooleanCheckbox>
                    <zlb:label
                        labelFor="contactPersonCheckbox"
                        labelText="#{msgs.login_new_account_userIsContactPerson}"
                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                        labelRequired="true" />
                </div>

            </div>
            <section class="common-region">

                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page3']}">

                    <div class="form #{field.validationError ? 'validate--danger' : ''}">

                        <zlb:label
                            labelFor="input1"
                            labelText="#{field.label}"
                            labelRequired="#{field.required}" />


                        <x:inputText
                            rendered="#{field.fieldType=='input'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputText>


                        <x:inputTextarea
                            rendered="#{field.fieldType=='textarea'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputTextarea>
                        <h:selectOneMenu
                            rendered="#{field.fieldType=='dropdown'}"
                            styleClass="form-control"
                            value="#{field.value}"
                            pt:aria-label="#{field.label}">
                            <f:selectItem
                                itemValue="null"
                                itemLabel="#{msgs.bitteAuswaehlen}" />
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox
                            rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.booleanValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                        </h:selectBooleanCheckbox>
                        <h:selectOneRadio
                            rendered="#{field.fieldType=='combo' and field.booleanValue}"
                            styleClass="form-control"
                            value="#{field.subValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneRadio>

                        <!-- ICONS -->
                        <ui:include src="/uii/includes/form_icons.xhtml">
                            <ui:param
                                name="helpTitle"
                                value="#{field.label}" />
                            <ui:param
                                name="helpBody"
                                value="#{field.helpMessage}" />
                        </ui:include>

                        <h:panelGroup
                            layout="block"
                            rendered="#{field.validationError}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{field.validationErrorMessage}" />
                        </h:panelGroup>
                        <h:outputText
                            styleClass="help-block font-light"
                            rendered="#{NavigationForm.showHelp}"
                            value="#{field.helpMessage}" />

                    </div>
                </ui:repeat>
            </section>

            <button
                jsf:rendered="#{!externalLoginBean.displaySecondContact}"
                jsf:id="createNewContact"
                jsf:action="#{externalLoginBean.createNewContact}"
                style="margin-bottom: 20px;"
                class="btn btn-primary-400 ms-auto">
                <h:outputText value="#{msgs.login_new_createNewContact}" />
            </button>

            <section
                class="common-region"
                jsf:rendered="#{externalLoginBean.displaySecondContact}">
                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page3a']}">

                    <div class="form">

                        <zlb:label
                            labelFor="input1"
                            labelText="#{field.label}"
                            labelRequired="#{field.required}" />


                        <x:inputText
                            rendered="#{field.fieldType=='input'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputText>


                        <x:inputTextarea
                            rendered="#{field.fieldType=='textarea'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputTextarea>
                        <h:selectOneMenu
                            rendered="#{field.fieldType=='dropdown'}"
                            styleClass="form-control"
                            value="#{field.value}"
                            pt:aria-label="#{field.label}">
                            <f:selectItem
                                itemValue="null"
                                itemLabel="#{msgs.bitteAuswaehlen}" />
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox
                            rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.booleanValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                        </h:selectBooleanCheckbox>
                        <h:selectOneRadio
                            rendered="#{field.fieldType=='combo' and field.booleanValue}"
                            styleClass="form-control"
                            value="#{field.subValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneRadio>

                        <!-- ICONS -->
                        <ui:include src="/uii/includes/form_icons.xhtml">
                            <ui:param
                                name="helpTitle"
                                value="#{field.label}" />
                            <ui:param
                                name="helpBody"
                                value="#{field.helpMessage}" />
                        </ui:include>

                        <h:panelGroup
                            layout="block"
                            rendered="#{field.validationError}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{field.validationErrorMessage}" />
                        </h:panelGroup>
                        <h:outputText
                            styleClass="help-block font-light"
                            rendered="#{NavigationForm.showHelp}"
                            value="#{field.helpMessage}" />

                    </div>
                </ui:repeat>
            </section>



        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page4'}">

            <section class="common-region additional-data">
                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page4']}">
                    <div class="form-group">


                        <ui:fragment rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}">

                            <div class="form form-check">
                                <div class="form-check-wrapper">

                                    <h:selectBooleanCheckbox
                                        rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                                        pt:aria-label="#{field.label}"
                                        styleClass="form-control"
                                        value="#{field.booleanValue}">
                                        <f:ajax
                                            render="@form"
                                            execute="@this" />
                                    </h:selectBooleanCheckbox>

                                    <zlb:label
                                        labelFor="activation"
                                        labelText="#{field.label}"
                                        labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                                        labelRequired="#{field.required}" />
                                </div>
                                <!-- end form-check-wraper -->

                                <!-- ICONS -->
                                <ui:include src="/uii/includes/form_icons.xhtml">
                                    <ui:param
                                        name="helpTitle"
                                        value="#{field.label}" />
                                    <ui:param
                                        name="helpBody"
                                        value="#{field.helpMessage}" />
                                </ui:include>

                            </div>
                        </ui:fragment>

                        <i
                            jsf:rendered="#{field.required}"
                            class="fa fa-asterisk pull-right font-asterisk"
                            title="#{msgs.requiredField}"
                            data-toggle="tooltip" />
                        <div class="email controls">

                            <x:inputText
                                rendered="#{field.fieldType=='input'}"
                                pt:aria-label="#{field.label}"
                                styleClass="form-control"
                                value="#{field.value}">
                                <f:ajax
                                    render="@this"
                                    execute="@this" />
                                <f:passThroughAttribute
                                    name="placeholder"
                                    value="" />
                            </x:inputText>
                            <x:inputTextarea
                                rendered="#{field.fieldType=='textarea'}"
                                pt:aria-label="#{field.label}"
                                styleClass="form-control"
                                value="#{field.value}">
                                <f:ajax
                                    render="@this"
                                    execute="@this" />
                                <f:passThroughAttribute
                                    name="placeholder"
                                    value="" />
                            </x:inputTextarea>
                            <h:selectOneMenu
                                rendered="#{field.fieldType=='dropdown'}"
                                styleClass="form-select"
                                value="#{field.value}"
                                pt:aria-label="#{field.label}">
                                <f:selectItem
                                    itemValue="null"
                                    itemLabel="#{msgs.bitteAuswaehlen}" />
                                <f:ajax
                                    render="@this"
                                    execute="@this" />
                                <f:selectItems value="#{field.selectItemList}" />
                            </h:selectOneMenu>
                            <h:selectOneRadio
                                rendered="#{field.fieldType=='combo' and field.booleanValue}"
                                styleClass="form-control"
                                value="#{field.subValue}">
                                <f:ajax
                                    render="@form"
                                    execute="@this" />
                                <f:selectItems value="#{field.selectItemList}" />
                            </h:selectOneRadio>
                            <h:panelGroup
                                layout="block"
                                rendered="#{field.validationError}"
                                styleClass="font-danger validation-message">
                                <h:outputText value="#{field.validationErrorMessage}" />
                            </h:panelGroup>
                            <h:outputText
                                styleClass="help-block font-light"
                                rendered="#{NavigationForm.showHelp}"
                                value="#{fieldy.helpMessage}" />
                        </div>
                    </div>

                </ui:repeat>


            </section>


        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page5'}">

            <section class="common-region one-col overview">
                <!-- show all fields in read only mode -->
                <h3>
                    <h:outputText value="#{msgs.login_new_institution}" />
                </h3>
                <intranda:formOutputText
                    label="#{msgs.login_new_account_institutionName}"
                    field="#{externalLoginBean.institutionName}"
                    name="institutionName"
                    fieldStyle="form-control" />
                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page2']}">
                    <intranda:formOutputText
                        name="field"
                        label="#{field.label}"
                        field="#{field.value}"
                        fieldStyle="form-control" />
                </ui:repeat>
                <h3>
                    <h:outputText value="#{msgs.login_new_contact}" />
                </h3>
                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page3']}">
                    <intranda:formOutputText
                        name="field"
                        label="#{field.label}"
                        field="#{field.value}"
                        fieldStyle="form-control" />
                </ui:repeat>
                <ui:fragment rendered="#{externalLoginBean.displaySecondContact}">
                    <ui:repeat
                        var="field"
                        value="#{externalLoginBean.additionalFields['page3a']}">
                        <intranda:formOutputText
                            name="field"
                            label="#{field.label}"
                            field="#{field.value}"
                            fieldStyle="form-control" />
                    </ui:repeat>
                </ui:fragment>

                <h3>
                    <h:outputText value="#{msgs.login_new_additionalData}" />
                </h3>
                <ui:repeat
                    var="field"
                    value="#{externalLoginBean.additionalFields['page4']}">
                    <intranda:formOutputText
                        name="field"
                        label="#{field.label}"
                        field="#{field.value}"
                        fieldStyle="form-control" />
                </ui:repeat>

                <div class="form form-check">
                    <div class="form-check-wrapper">
                        <h:selectBooleanCheckbox
                            id="activation"
                            pt:aria-label="#{msgs.login_new_account_activation}"
                            forceId="true"
                            styleClass="form-check-input"
                            value="#{externalLoginBean.activation}"
                            required="true">
                        </h:selectBooleanCheckbox>
                        <zlb:label
                            labelFor="activation"
                            labelText="#{msgs.login_new_account_activation}"
                            labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                            labelRequired="true" />
                    </div>
                    <!-- ICONS -->
                    <ui:include src="/uii/includes/form_icons.xhtml">
                        <ui:param
                            name="helpTitle"
                            value="#{field.label}" />
                        <ui:param
                            name="helpBody"
                            value="#{field.helpMessage}" />
                    </ui:include>
                </div>
            </section>
        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='wait'}">
            <section class="common-region">
                <h:outputText
                    escape="false"
                    value="#{msgs.login_new_account_creationSuccessful}" />
            </section>
        </ui:fragment>

        <div
            class="info-required"
            jsf:rendered="#{externalLoginBean.wizzardMode!='page1'}">
            <h:outputText
                escape="false"
                value="#{msgs.plugin_rest_usercreation_requiredFields}" />
        </div>
        <ui:fragment rendered="#{externalLoginBean.wizzardMode!='page1'}">
            <div class="submit form-actions form-actions--progress">
                <button
                    jsf:rendered="#{externalLoginBean.wizzardMode!='page2'}"
                    jsf:action="#{externalLoginBean.back}"
                    jsf:id="goBack"
                    class="btn btn-blank me-auto">
                    <h:outputText value="#{msgs.back}" />
                </button>
                <ui:include src="/uii/includes/zlb-progress.xhtml">
                    <ui:param
                        name="data"
                        value="#{externalLoginBean}" />
                </ui:include>
                <button
                    jsf:rendered="#{externalLoginBean.wizzardMode!='page5'}"
                    jsf:id="goNext"
                    jsf:action="#{externalLoginBean.next}"
                    class="btn btn-success ms-auto">
                    <h:outputText value="#{msgs.next}" />
                </button>
                <button
                    jsf:rendered="#{externalLoginBean.wizzardMode=='page5'}"
                    jsf:id="createInsitution"
                    jsf:action="#{externalLoginBean.createInstitution}"
                    class="btn btn-success ms-auto">
                    <h:outputText value="#{msgs.createInsitution}" />
                </button>
            </div>
        </ui:fragment>

    </composite:implementation>

</ui:composition>
