<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:zlb="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <h2 class="page__heading">
            <h:outputText  rendered="#{externalLoginBean.wizzardMode=='page1'}" value="#{msgs.login_new_account}" />
            <h:outputText  rendered="#{externalLoginBean.wizzardMode=='page2'}" value="#{msgs.login_new_institution}" />
            <h:outputText  rendered="#{externalLoginBean.wizzardMode=='page3'}" value="#{msgs.login_new_institution}" />
            <h:outputText  rendered="#{externalLoginBean.wizzardMode=='page4'}" value="#{msgs.login_new_institution}" />
            <h:outputText  rendered="#{externalLoginBean.wizzardMode=='page5'}" value="#{msgs.login_new_institution}" />
            <button type="button" class="btn page__help" data-bs-toggle="modal" data-bs-title="help title" data-bs-target="#pageHelpModal">
              <ui:include src="/uii/includes/icon-help.xhtml" />
            </button>
        </h2>


        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page1'}">

          <section class="common-region">
            <!-- account name -->
            <div class="form">
                <zlb:label
                    labelFor="accountName"
                    labelText="#{msgs.login_new_account_accountName}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <zlb:input
                    inputId="accountName"
                    inputAriaLabel="#{msgs.login_new_account_accountName}"
                    inputValue="#{externalLoginBean.accountName}"
                    inputRequired="true"
                    inputPlaceholder="#{msgs.login_new_account_accountName}"
                    inputDuplicate="true"
                    showHelpBtn="true"
                    helpText="lorem ipsum" />
            </div>

            <!-- firstname -->
            <div class="form column-start">
                <zlb:label
                    labelFor="firstname"
                    labelText="#{msgs.firstname}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <zlb:input
                    inputId="firstname"
                    inputAriaLabel="#{msgs.firstname}"
                    inputValue="#{externalLoginBean.firstname}"
                    inputRequired="true"
                    inputPlaceholder="#{msgs.login_new_account_firstname}"
                    labelHelpText="Lorem ipsum" />
            </div>

            <!-- lastname -->
            <div class="form">
                <zlb:label
                    labelFor="lastname"
                    labelText="#{msgs.lastname}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <zlb:input
                    inputId="lastname"
                    inputAriaLabel="#{msgs.lastname}"
                    inputValue="#{externalLoginBean.lastname}"
                    inputRequired="true"
                    inputPlaceholder="#{msgs.login_new_account_lastname}"
                    showHelpBtn="true"
                    labelHelpText="Lorem ipsum" />

            </div>

            <!-- password -->
            <div class="form">

                <zlb:label
                    labelFor="password"
                    labelText="#{msgs.login_new_account_password}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <x:inputSecret
                    id="password"
                    pt:aria-label="#{msgs.login_new_account_password}"
                    forceId="true"
                    styleClass="form-control"
                    value="#{externalLoginBean.password}"
                    required="true">
                    <f:passThroughAttribute
                        name="placeholder"
                        value="" />
                </x:inputSecret>

                <!-- Icons -->
                <ui:include src="/uii/includes/form_icons.xhtml" />


                <!--
                <div class="help-text vis-hidden">
                    Lorem Ipsum
                </div>
                -->

            </div>

            <!-- confirm password -->
            <div class="form">

                <zlb:label
                    labelFor="password2"
                    labelText="#{msgs.login_new_account_password2}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <x:inputSecret
                    id="password2"
                    pt:aria-label="#{msgs.login_new_account_password2}"
                    forceId="true"
                    styleClass="form-control"
                    value="#{externalLoginBean.confirmPassword}"
                    required="true">
                    <f:passThroughAttribute
                        name="placeholder"
                        value="" />
                </x:inputSecret>

                <!-- Icons -->
                <ui:include src="/uii/includes/form_icons.xhtml" />


                <!--
              <div class="help-text vis-hidden">
                  Lorem Ipsum
              </div>
                -->
            </div>


            <!-- email address -->
            <div class="form">

                <zlb:label
                    labelFor="emailAddress"
                    labelText="#{msgs.login_new_account_emailAddress}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <zlb:input
                    inputId="emailAddress"
                    inputAriaLabel="#{msgs.login_new_account_emailAddress}"
                    inputForceId="true"
                    inputValue="#{externalLoginBean.emailAddress}"
                    inputRequired="true"
                    inputPlaceholder="#{msgs.login_new_account_emailAddress}"
                    labelHelpText="Lorem ipsum" />
            </div>

            <!-- confirm email -->
            <div class="form">

                <zlb:label
                    labelFor="emailAddress2"
                    labelText="#{msgs.login_new_account_emailAddress2}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                <zlb:input
                    inputId="emailAddress2"
                    inputAriaLabel="#{msgs.login_new_account_emailAddress2}"
                    inputForceId="true"
                    inputValue="#{externalLoginBean.confirmEmailAddress}"
                    inputRequired="true"
                    inputPlaceholder="#{msgs.login_new_account_emailAddress}" />

            </div>

            <div class="form-check confirm-privacy">

                <h:selectBooleanCheckbox
                    id="privacyStatement"
                    pt:aria-label="#{msgs.login_new_account_confirmPrivacyStatement}"
                    forceId="true"
                    styleClass="form-check-input"
                    value="#{externalLoginBean.privacyTextAccepted}"
                    required="true">
                </h:selectBooleanCheckbox>

                <zlb:label
                    syleClass="form-check-label"
                    labelFor="privacyStatement"
                    labelText="#{msgs.login_new_account_confirmPrivacyStatement}"
                    labelHelpText="Lorem ipsum dolor sit amet, consetetur sadipscing elitr"
                    labelRequired="true" />

                  <!-- ICONS -->
                  <ui:include src="/uii/includes/form_icons.xhtml">
                    <ui:param name="duplicateElement" value="false" />
                    <ui:param name="showHelpBtn" value="true" />
                    <ui:param name="helpTitle" value="Privacy Help" />
                    <ui:param name="helpBody" value="Lorem ipsum dolor sit amet, consetetur sadipscing elitr" />
                  </ui:include>

            </div>
            </section> <!-- end common-region -->


            <div class="form-actions form-actions--progress">
                <!-- cancel button -->
                <button
                    jsf:id="back"
                    class="btn btn-blank me-4"
                    jsf:immediate="true">
                    <f:setPropertyActionListener
                        value=""
                        target="#{externalLoginBean.uiStatus}" />
                    <h:outputText value="#{msgs.abbrechen}" />
                </button>

                <ui:include src="/uii/includes/zlb-progress.xhtml">
                    <ui:param name="data" value="#{externalLoginBean}" />
                </ui:include>

                <!-- create button -->
                <button
                    jsf:action="#{externalLoginBean.createAccount}"
                    jsf:id="create"
                    class="btn btn-primary-400">
                    <h:outputText value="#{msgs.login_new_account_createAccount}" />
                </button>
            </div>

        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page2'}">

          <section class="common-region">
            <div class="form">

                <!--
                <h:outputLabel
                    for="institutionName"
                    value="#{msgs.login_new_account_institutionName}" />
                <i
                    class="fa fa-asterisk pull-right font-asterisk"
                    title="#{msgs.requiredField}"
                    data-toggle="tooltip" />

                <div class="email controls">
                    <x:inputText
                        id="institutionName"
                        pt:aria-label="#{msgs.login_new_account_institutionName}"
                        forceId="true"
                        styleClass="form-control"
                        value="#{externalLoginBean.institutionName}"
                        required="false">
                        <f:passThroughAttribute
                            name="placeholder"
                            value="" />
                    </x:inputText>
                    <h:panelGroup
                        layout="block"
                        rendered="#{externalLoginBean.institutionNameInvalid}"
                        styleClass="font-danger validation-message">
                        <h:outputText value="#{msgs.login_new_account_institutionNameInvalid}" />
                    </h:panelGroup>
                    <h:outputText
                        styleClass="help-block font-light"
                        rendered="#{NavigationForm.showHelp}"
                        value="#{fieldy.login_new_account_institutionNameHelp}" />
                </div>
                -->

                <zlb:label
                    labelFor="institutionName"
                    labelText="#{msgs.login_new_account_institutionName}"
                    labelRequired="true" />

                <zlb:input
                    inputId="institutionName"
                    inputAriaLabel="#{msgs.login_new_account_institutionName}"
                    inputForceId="true"
                    inputValue="#{externalLoginBean.institutionName}"
                    inputRequired="false"
                    inputPlaceholder=""
                    inputDuplicate="true"
                    showHelpBtn="true"
                    helpText="lorem ipsum" />

            </div>

            <ui:repeat
                var="field"
                value="#{externalLoginBean.additionalFields['page2']}">

                <div class="form">

                <zlb:label
                    labelFor="input"
                    labelText="#{field.label}"
                    labelRequired="#{field.required}" />

                <!--
                <zlb:input
                    inputId="input"
                    inputAriaLabel="#{field.label}"
                    inputForceId="true"
                    inputValue="#{field.value}"
                    inputRequired="false"
                    inputPlaceholder=""
                    inputDuplicate="false"
                    inputAjax="@this"
                    showHelpBtn="true"

                    helpText="lorem ipsum" />


                    <h:outputLabel value="{field.label}" />

                    <i
                        jsf:rendered="#{field.required}"
                        class="fa fa-asterisk pull-right font-asterisk"
                        title="#{msgs.requiredField}"
                        data-toggle="tooltip" />

                    -->
                        <x:inputText
                            id="input"
                            rendered="#{field.fieldType=='input'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputText>



                        <!--
                    <div class="email controls">
                        -->

                        <x:inputTextarea
                            id="textarea"
                            rendered="#{field.fieldType=='textarea'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputTextarea>
                        <h:selectOneMenu
                            id="dropdown"
                            rendered="#{field.fieldType=='dropdown'}"
                            styleClass="form-control"
                            value="#{field.value}"
                            pt:aria-label="#{field.label}">
                            <f:selectItem
                                itemValue="null"
                                itemLabel="#{msgs.bitteAuswaehlen}" />
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox
                            rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.booleanValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                        </h:selectBooleanCheckbox>
                        <h:selectOneRadio
                            id="radio"
                            rendered="#{field.fieldType=='combo' and field.booleanValue}"
                            styleClass="form-control"
                            value="#{field.subValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneRadio>

                        <h:panelGroup
                            layout="block"
                            rendered="#{field.validationError}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{field.validationErrorMessage}" />
                        </h:panelGroup>
                        <h:outputText
                            styleClass="help-block font-light"
                            rendered="#{NavigationForm.showHelp}"
                            value="#{fieldy.helpMessage}" />
                        <!--
                    </div>
                        -->

                  <!-- ICONS -->
                  <ui:include src="/uii/includes/form_icons.xhtml">
                    <ui:param name="duplicateElement" value="false" />
                    <ui:param name="showHelpBtn" value="true" />
                    <ui:param name="helpTitle" value="Privacy Help" />
                    <ui:param name="helpBody" value="Lorem ipsum dolor sit amet, consetetur sadipscing elitr" />
                  </ui:include>

                </div>
            </ui:repeat>
            </section>
        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page3'}">

          <section class="common-region">

            <!--
            <h2>
                <h:outputText value="#{msgs.login_new_contact}" />
            </h2>
            -->

            <ui:repeat
                var="field"
                value="#{externalLoginBean.additionalFields['page3']}">

                <div class="form">

                <zlb:label
                    labelFor="input1"
                    labelText="#{field.label}"
                    labelRequired="#{field.required}" />

                  <!--
                <zlb:input
                    inputId="input1"
                    inputAriaLabel="#{field.label}"
                    inputForceId="true"
                    inputValue="#{filed.value}"
                    inputRequired="false"
                    inputPlaceholder=""
                    inputDuplicate="false"
                    showHelpBtn="true"
                    helpText="lorem ipsum" />

                    <h:outputLabel value="#{field.label}" />
                    <i
                        jsf:rendered="#{field.required}"
                        class="fa fa-asterisk pull-right font-asterisk"
                        title="#{msgs.requiredField}"
                        data-toggle="tooltip" />
                    <div class="email controls">
                    -->

                        <x:inputText
                            rendered="#{field.fieldType=='input'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputText>


                        <x:inputTextarea
                            rendered="#{field.fieldType=='textarea'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputTextarea>
                        <h:selectOneMenu
                            rendered="#{field.fieldType=='dropdown'}"
                            styleClass="form-control"
                            value="#{field.value}"
                            pt:aria-label="#{field.label}">
                            <f:selectItem
                                itemValue="null"
                                itemLabel="#{msgs.bitteAuswaehlen}" />
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox
                            rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.booleanValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                        </h:selectBooleanCheckbox>
                        <h:selectOneRadio
                            rendered="#{field.fieldType=='combo' and field.booleanValue}"
                            styleClass="form-control"
                            value="#{field.subValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneRadio>
                        <h:panelGroup
                            layout="block"
                            rendered="#{field.validationError}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{field.validationErrorMessage}" />
                        </h:panelGroup>
                        <h:outputText
                            styleClass="help-block font-light"
                            rendered="#{NavigationForm.showHelp}"
                            value="#{fieldy.helpMessage}" />
                        <!--
                    </div>
                    -->


                  <!-- ICONS -->
                  <ui:include src="/uii/includes/form_icons.xhtml">
                    <ui:param name="duplicateElement" value="false" />
                    <ui:param name="showHelpBtn" value="true" />
                    <ui:param name="helpTitle" value="Privacy Help" />
                    <ui:param name="helpBody" value="Lorem ipsum dolor sit amet, consetetur sadipscing elitr" />
                  </ui:include>

                </div>
            </ui:repeat>
          </section>


        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page2'}">
            <h2>
                <h:outputText value="#{msgs.login_new_additionalData}" />
            </h2>

            <section class="common-region">
            <ui:repeat
                var="field"
                value="#{externalLoginBean.additionalFields['page4']}">
                <div class="form-group">

                    <h:outputLabel value="#{field.label}" />

                    <i
                        jsf:rendered="#{field.required}"
                        class="fa fa-asterisk pull-right font-asterisk"
                        title="#{msgs.requiredField}"
                        data-toggle="tooltip" />
                    <div class="email controls">

                        <x:inputText
                            rendered="#{field.fieldType=='input'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputText>
                        <x:inputTextarea
                            rendered="#{field.fieldType=='textarea'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.value}">
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:passThroughAttribute
                                name="placeholder"
                                value="" />
                        </x:inputTextarea>
                        <h:selectOneMenu
                            rendered="#{field.fieldType=='dropdown'}"
                            styleClass="form-select"
                            value="#{field.value}"
                            pt:aria-label="#{field.label}">
                            <f:selectItem
                                itemValue="null"
                                itemLabel="#{msgs.bitteAuswaehlen}" />
                            <f:ajax
                                render="@this"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneMenu>
                        <h:selectBooleanCheckbox
                            rendered="#{field.fieldType=='checkbox' or field.fieldType=='combo'}"
                            pt:aria-label="#{field.label}"
                            styleClass="form-control"
                            value="#{field.booleanValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                        </h:selectBooleanCheckbox>
                        <h:selectOneRadio
                            rendered="#{field.fieldType=='combo' and field.booleanValue}"
                            styleClass="form-control"
                            value="#{field.subValue}">
                            <f:ajax
                                render="@form"
                                execute="@this" />
                            <f:selectItems value="#{field.selectItemList}" />
                        </h:selectOneRadio>
                        <h:panelGroup
                            layout="block"
                            rendered="#{field.validationError}"
                            styleClass="font-danger validation-message">
                            <h:outputText value="#{field.validationErrorMessage}" />
                        </h:panelGroup>
                        <h:outputText
                            styleClass="help-block font-light"
                            rendered="#{NavigationForm.showHelp}"
                            value="#{fieldy.helpMessage}" />
                    </div>
                </div>

            </ui:repeat>

            </section>


        </ui:fragment>

         <ui:fragment rendered="#{externalLoginBean.wizzardMode=='page5'}">
            <h2>
                <h:outputText value="#{msgs.login_new_activation}" />
            </h2>
            <section class="common-region one-col overview">
            <!-- show all fields in read only mode -->
            <h3>
                <h:outputText value="#{msgs.login_new_institution}" />
            </h3>
            <intranda:formOutputText
                label="#{msgs.login_new_account_institutionName}"
                field="#{externalLoginBean.institutionName}"
                name="institutionName"
                fieldStyle="form-control" />
            <ui:repeat
                var="field"
                value="#{externalLoginBean.additionalFields['page2']}">
                <intranda:formOutputText
                    name="field"
                    label="#{field.label}"
                    field="#{field.value}"
                    fieldStyle="form-control" />
            </ui:repeat>
            <h3>
                <h:outputText value="#{msgs.login_new_contact}" />
            </h3>
            <ui:repeat
                var="field"
                value="#{externalLoginBean.additionalFields['page3']}">
                <intranda:formOutputText
                    name="field"
                    label="#{field.label}"
                    field="#{field.value}"
                    fieldStyle="form-control" />
            </ui:repeat>
            <h3>
                <h:outputText value="#{msgs.login_new_additionalData}" />
            </h3>
            <ui:repeat
                var="field"
                value="#{externalLoginBean.additionalFields['page4']}">
                <intranda:formOutputText
                    name="field"
                    label="#{field.label}"
                    field="#{field.value}"
                    fieldStyle="form-control" />
            </ui:repeat>
            Freischaltung:* Hiermit beantrage ich die Freischaltung zur Ablieferung digitaler Pflichtpublikationen
            </section>
        </ui:fragment>

        <ui:fragment rendered="#{externalLoginBean.wizzardMode!='page1'}">
            <div class="submit form-actions form-actions--progress">
                <button
                    jsf:rendered="#{externalLoginBean.wizzardMode!='page2'}"
                    jsf:action="#{externalLoginBean.back}"
                    jsf:id="goBack"
                    class="btn btn-primary-400">
                    <h:outputText value="#{msgs.back}" />
                </button>
                <ui:include src="/uii/includes/zlb-progress.xhtml">
                    <ui:param name="data" value="#{externalLoginBean}" />
                </ui:include>
                <button
                    jsf:rendered="#{externalLoginBean.wizzardMode!='page5'}"
                    jsf:id="goNext"
                    jsf:action="#{externalLoginBean.next}"
                    style="margin-bottom: 20px;"
                    class="btn btn-primary-400">
                    <h:outputText value="#{msgs.next}" />
                </button>
                <button
                    jsf:rendered="#{externalLoginBean.wizzardMode=='page5'}"
                    jsf:id="createInsitution"
                    jsf:action="#{externalLoginBean.createInstitution}"
                    style="margin-bottom: 20px;"
                    class="btn btn-primary-400">
                    <h:outputText value="#{msgs.createInsitution}" />
                </button>
            </div>
        </ui:fragment>


        <zlb:modal
            modalId="exampleModal"
        >
        </zlb:modal>

        <zlb:modal
            modalId="pageHelpModal"
            modalTitle="Seiten Hilfe"
            >

            <!-- Dummy child, will be replaced later -->
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa ratione totam itaque. Dignissimos quasi nam rerum provident commodi esse cumque architecto culpa, delectus asperiores nisi tempore, incidunt natus praesentium ex?</p>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa ratione totam itaque. Dignissimos quasi nam rerum provident commodi esse cumque architecto culpa, delectus asperiores nisi tempore, incidunt natus praesentium ex?</p>

            <img src="https://via.placeholder.com/700x350" class="modal__img"/>

            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa ratione totam itaque. Dignissimos quasi nam rerum provident commodi esse cumque architecto culpa, delectus asperiores nisi tempore, incidunt natus praesentium ex?</p>

        </zlb:modal>


    </composite:implementation>

</ui:composition>
