<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface>

        <composite:attribute name="identifier" />
        <!-- #{field.label} -->
        <composite:attribute name="labelText" />
        <!-- #{field.helpMessage} -->
        <composite:attribute name="labelHelpText" />
        <!-- #{field.required} -->
        <composite:attribute
            name="fieldRequired"
            default="false" />
        <!-- #{field.value} -->
        <composite:attribute name="value" />
        <!-- #{field.role} -->
        <composite:attribute name="role" />
        <!-- #{field.validationError} -->
        <composite:attribute
            name="propertyValid"
            default="true" />
        <!-- #{field.validationErrorMessage} -->
        <composite:attribute name="errorMessageText" />
        <!-- #{field.selectItemList} -->
        <composite:attribute name="selectItems" />

        <!-- #{field.helpMessage} ? -->
        <composite:attribute
            name="placeholderText"
            default="" />
        <!-- styling options -->
        <composite:attribute
            name="mainClass"
            default="" />
        <composite:attribute
            name="subClass"
            default="" />
        <composite:attribute
            name="fieldStyle"
            default="" />
            
        <composite:attribute name="displayDuplicateButton" default="false" />
        <composite:attribute name="render" default="@form" />                 
    </composite:interface>

    <composite:implementation>
        <h:panelGroup
            id="#{cc.attrs.identifier}"
            layout="block"
            styleClass="form-group grid-row #{cc.attrs.mainClass}">
            <label for="#{cc.attrs.identifier}_input">
                #{cc.attrs.labelText}
                <h:panelGroup
                    styleClass="input-required"
                    rendered="#{cc.attrs.fieldRequired}">
                    <i class="fa fa-asterisk" />
                </h:panelGroup>
                <ui:include src="../uii/includes/icon-help.xhtml">
                    <ui:param
                        name="helpText"
                        value="#{cc.attrs.labelHelpText}" />
                </ui:include>
            </label>
            <div class="form-field #{cc.attrs.subClass}">


                <h:selectOneMenu
                    id="#{cc.attrs.identifier}_select"
                    styleClass="form-control #{cc.attrs.fieldStyle}"
                    value="#{cc.attrs.role}"
                    pt:aria-label="#{cc.attrs.labelText}">
                    <f:selectItem
                        itemValue="null"
                        itemLabel="#{msgs.bitteAuswaehlen}" />
                    <f:ajax
                        render="@form"
                        execute="@this" />
                    <f:selectItems value="#{cc.attrs.selectItems}" />
                </h:selectOneMenu>

                <x:inputText
                    id="#{cc.attrs.identifier}_input"
                    pt:aria-label="#{cc.attrs.labelText}"
                    styleClass="form-control #{cc.attrs.fieldStyle}"
                    value="#{cc.attrs.value}">
                    <f:ajax
                        render="@form"
                        execute="@this" />
                    <f:passThroughAttribute
                        name="placeholder"
                        value="#{cc.attrs.placeholderText}" />
                </x:inputText>

                <h:panelGroup
                    layout="block"
                    rendered="#{!cc.attrs.propertyValid}"
                    styleClass="font-danger validation-message">
                    <h:outputText value="#{cc.attrs.errorMessageText}" />
                </h:panelGroup>
                <h:outputText
                    styleClass="help-block font-light"
                    rendered="#{NavigationForm.showHelp}"
                    value="#{cc.attrs.labelHelpText}" />
            <h:panelGroup rendered="#{cc.attrs.displayDuplicateButton}">
            </div>
                <button
                    jsf:id="button"
                    jsf:action="#{DashboardForm.plugin.duplicateMetadataField}">
                    <i class="fa fa-plus" />
                    <f:setPropertyActionListener
                        value="#{field}"
                        target="#{DashboardForm.plugin.currentField}" />
                </button>
            </h:panelGroup>                    
                    
                    


        </h:panelGroup>

    </composite:implementation>

</ui:composition>

