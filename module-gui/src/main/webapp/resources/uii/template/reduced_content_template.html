<!DOCTYPE html>
<html
    lang="#{SpracheForm.locale}"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:zlb="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:ds="http://deltaspike.apache.org/jsf">

    <!-- THIS IS FOR TESTING PURPOSE, DO NOT USE IT FOR ACTUAL PAGES -->

<h:head>
    <meta charset="utf-8" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0" />
    <!-- Apple devices fullscreen -->
    <meta
        name="apple-mobile-web-app-capable"
        content="yes" />
    <!-- Apple devices fullscreen -->
    <meta
        name="apple-mobile-web-app-status-bar-style"
        content="black-translucent" />

    <meta
        name="description"
        content="Goobi workflow" />
    <meta
        name="author"
        content="intranda GmbH" />
    <meta
        http-equiv="Content-Type"
        content="text/html; charset=utf-8" />
    <meta
        http-equiv="Content-Script-Type"
        content="type" />
    <meta
        http-equiv="pragma"
        content="no-cache" />
    <meta
        http-equiv="cache-control"
        content="no-cache" />
    <meta
        name="date"
        content="1970-01-01T00:00:00+01:00" />
    <meta
        name="version"
        content="#{HelperForm.applicationHeaderTitle} - #{HelperForm.buildVersion}" />
    <meta
        name="builddate"
        content="#{HelperForm.buildDate}" />
    <title><h:outputText value="#{msgs.plugin_dashboard_delivery_template_title}" /></title>

    <!-- ========================================
        CSS
        ===================================== -->

    <!-- Font Awesome -->
    <link rel="stylesheet" href="templatePG/css/lib/font-awesome.css?v=#{HelperForm.buildVersion}" />
    <!-- Bootstrap -->
    <link rel="stylesheet" href="template/assets/css/dist/bootstrap.min.css?v=#{HelperForm.buildVersion}" />
    <!-- ZLB styles -->
    <link rel="stylesheet" href="template/assets/css/dist/custom.min.css?v=#{HelperForm.buildVersion}" />



    <script src="template/js/intranda.js?v=1.2"></script>
    <!-- jQuery -->
    <h:outputScript
        library="primefaces"
        name="jquery/jquery.js?v=#{HelperForm.buildVersion}"
        target="head" />
    <!-- Mobile nav swipe -->
    <script src="template/js/plugins/touchwipe/touchwipe.min.js?v=#{HelperForm.buildVersion}"></script>
    <!-- Nice Scroll -->
    <script src="template/js/plugins/nicescroll/jquery.nicescroll.min.js?v=#{HelperForm.buildVersion}"></script>
    <!-- imagesLoaded -->
    <script src="template/js/plugins/imagesLoaded/jquery.imagesloaded.min.js?v=#{HelperForm.buildVersion}"></script>
    <!-- jQuery UI -->
    <script src="template/js/plugins/jquery-ui/jquery-ui.js?v=#{HelperForm.buildVersion}"></script>
    <!-- slimScroll -->
    <script src="template/js/plugins/slimscroll/jquery.slimscroll.min.js?v=#{HelperForm.buildVersion}"></script>
    <!-- Bootstrap -->

    <!-- BS 5 -->
    <script src="templatePG/js/bootstrap.bundle.min.js?v=#{HelperForm.buildVersion}"></script>
    <!--
    <script src="template/js/bootstrap.min.js?v=#{HelperForm.buildVersion}"></script>
    <script src="template/js/bootstrap-slider.js?v=#{HelperForm.buildVersion}"></script>
    -->
    <!-- Bootbox -->
    <script src="template/js/plugins/bootbox/jquery.bootbox.js?v=#{HelperForm.buildVersion}"></script>
    <!-- Bootbox -->
    <script src="template/js/plugins/form/jquery.form.min.js?v=#{HelperForm.buildVersion}"></script>
    <!-- Validation -->
    <script src="template/js/plugins/validation/jquery.validate.min.js?v=#{HelperForm.buildVersion}"></script>
    <script src="template/js/plugins/validation/additional-methods.min.js?v=#{HelperForm.buildVersion}"></script>
    <!-- shortcuts -->
    <script src="template/js/jquery.hotkeys.js?v=#{HelperForm.buildVersion}"></script>
    <!-- Theme framework -->
    <!-- <script src="template/js/eakroko.js?v=#{HelperForm.buildVersion}"></script> -->
    <!-- Theme scripts -->
    <script src="template/js/application.js?v=#{HelperForm.buildVersion}"></script>

    <!--[if lte IE 9]>
	<script src="template/js/plugins/placeholder/jquery.placeholder.min.js?v=#{HelperForm.buildVersion}"></script>
		<script>
			$(document).ready(function() {
				$('input, textarea').placeholder();
			});
		</script>
	<![endif]-->

  <!-- Custom ZLB E-Pflicht scripsts -->

    <script src="template/assets/js/script.js?v=#{HelperForm.buildVersion}"></script>
    <script src="template/assets/js/accountNameValidation.js?v=#{HelperForm.buildVersion}"></script>    
    <script src="template/assets/js/clientSideValidation.js?v=#{HelperForm.buildVersion}"></script>
    <script src="template/assets/js/statusListNavigation.js?v=#{HelperForm.buildVersion}"></script>

    <!-- Favicon -->
    <link
        rel="shortcut icon"
        href="template/assets/favicon/favicon.ico" />
    <!-- Apple devices Homescreen icon -->
    <link
        rel="apple-touch-icon-precomposed"
        href="template/img/apple-touch-icon.png" />

    <!-- WCAG compatibility CSS -->

    <ui:fragment rendered="#{LoginForm.myBenutzer == null ? HelperForm.renderAccessibilityCss : LoginForm.myBenutzer.uiMode=='accessibility'}">
        <link
            rel="stylesheet"
            href="template/css/accessibility.css?v=#{HelperForm.buildVersion}" />
    </ui:fragment>

</h:head>

<ui:insert name="metadata" />

<h:body
    id="zlbEPflicht"
    styleClass="#{LoginForm.myBenutzer == null?'login':'sidebar-right'}"
    >
    <ds:windowId />
    <f:view locale="#{SpracheForm.locale}">

    <ui:include src="../includes/header.xhtml" />

    <!--
    <nav class="navigation-breadcrumb" aria-label="navigationBreadcrumb">
      <h:form style="margin:0px;" id="breadcrumb">
          <div class="breadcrumbs">
              <ul>
                  <ui:insert name="breadcrumb" />
              </ul>
          </div>
      </h:form>
    </nav>
    -->

    <main>

        <h:panelGroup rendered="#{LoginForm.myBenutzer==null}">
            <ui:include src="external_login.xhtml" />
        </h:panelGroup>

        <c:if test="#{LoginForm.myBenutzer!=null}">
            <div
                class="container-fluid"
                id="content"
                style="padding-bottom: 20px">
                <div
                    id="main"
                    style="margin-right: 0px;">
                    <div class="container">

                        <h:form id="header">
                            <o:socket
                                channel="developerMessageChannel"
                                connected="#{DevModeBean.developerMode}"
                                onmessage="() => window.location.reload()" />
                            <div>
                                <div class="page-header">
                                    <h:panelGroup id="globalWarningMessage">
                                        <h:panelGroup
                                            rendered="#{SessionForm.logoutMessage != ''}"
                                            styleClass="alert alert-danger block"
                                            style="line-height:40px;font-size:24px;">
                                            <i class="fa fa-exclamation-triangle margin-right-10"></i>
                                            <h:outputText value="#{SessionForm.logoutMessage}" />
                                        </h:panelGroup>
                                    </h:panelGroup>
                                    <o:socket channel="adminMessageChannel">
                                        <f:ajax
                                            event="update"
                                            render="globalWarningMessage" />
                                    </o:socket>

                                </div>
                            </div>
                        </h:form>
                        <div role="complementary">
                            <h:panelGroup
                                id="globalMessage"
                                style="display: inline">
                                <h:messages
                                    escape="false"
                                    globalOnly="true"
                                    errorClass="alert alert-danger"
                                    infoClass="alert alert-info"
                                    warnClass="alert"
                                    showDetail="true"
                                    showSummary="true"
                                    tooltip="true"
                                    styleClass="messages" />
                            </h:panelGroup>
                        </div>
                        <div
                            jsf:id="main-content"
                            tabindex="-1">
                            <ui:insert name="content" />
                        </div>
                    </div>
                </div>
            </div>
        </c:if>

    </main>

        <zlb:modal
            modalId="exampleModal"
        >
        </zlb:modal>



        <ui:include src="../includes/footer.xhtml" />

        <!-- JAVASCRIPT -->
        <!--
        <script src="template/js/dist/goobiWorkflowJS.min.js?v=#{HelperForm.buildVersion}"></script>
            -->
        <script>

            // goobiWorkflowConfig = {};

            // goobiWorkflowJS.init(goobiWorkflowConfig);

        </script>


        <script>



     // <![CDATA[
            jsf.ajax.addOnEvent(function (data) {
                var ajaxstatus = data.status; // Can be "begin", "complete" and "success"
                var ajaxloader = document.getElementById("ajaxloader");
                var source = data.source;
                var noLoaderGif = source.type == "hidden" && source.id.indexOf("header") == 0;

                switch (ajaxstatus) {
                    case "begin": // This is called right before ajax request is been sent.
                    	if(ajaxloader && !noLoaderGif) {
                        	ajaxloader.style.display = 'block';
                    	}
                        break;

                    case "complete": // This is called right after ajax response is received.
                    	if(ajaxloader) {
                        	ajaxloader.style.display = 'none';
                    	}
                        break;

                    case "success": // This is called when ajax response is successfully processed.
                        tooltipsInit(); // Find this function in script.js
                        // NOOP.
                        $(function () {
                            $('[data-toggle="tooltip"]').tooltip();
                            $('[data-toggle="popover"]').popover();
                            if ($('.popover.fade.right.in').length > 0) {
                                $('.popover.fade.right.in').remove();
                            }
                            scrollDownScrollDowns();
                        })
                        if (window.noLoadImages === undefined) {
                            loadImages();
                        }
                        break;
                }
            });


            $(document).bind('keyup', '#{LoginForm.myBenutzer.shortcutPrefix}+right', function () {
                var myButton = $("a[id$=':navnext']")
                if (myButton != null) {
                    myButton.click();
                }
            });

            $(document).bind('keyup', '#{LoginForm.myBenutzer.shortcutPrefix}+left', function () {
                var myButton = $("a[id$=':navprev']")
                if (myButton != null) {
                    myButton.click();
                }
            });

            window.myfaces = window.myfaces || {};
            myfaces.config = myfaces.config || {};
            //set the config part
            myfaces.config.no_portlet_env = true;

         // ]]>



                                </script>
    </f:view>
</h:body>
</html>
